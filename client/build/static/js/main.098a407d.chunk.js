(this.webpackJsonpnewchatroom=this.webpackJsonpnewchatroom||[]).push([[0],{55:function(e,t,s){},91:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(47),r=s.n(a),i=(s(55),s(50)),o=s(13),j=s(18),u=s(2),l=s(12),h=s.n(l),m=s(48),b=s.n(m),d=s(0),O=function(e){var t=e.el,s=Object(n.useRef)("");return Object(n.useEffect)((function(){s.current.scrollIntoView({behavior:"smooth"})})),Object(d.jsxs)("div",{className:"message",ref:s,children:[Object(d.jsxs)("p",{className:"meta",children:[t.username,Object(d.jsx)("span",{children:t.time})]}),Object(d.jsx)("p",{className:"text",children:t.text})]})};O.propTypes={users:h.a.array,messages:h.a.array,updateUsers:h.a.func,updateMessages:h.a.func};var f=function(e){var t=e.users,s=e.updateUsers,c=e.messages,a=e.updateMessages,r=Object(n.useState)(""),i=Object(o.a)(r,2),u=i[0],l=i[1],h=Object(n.useState)(""),m=Object(o.a)(h,2),f=m[0],x=m[1],p=new URLSearchParams(window.location.search).get("username"),v=new URLSearchParams(window.location.search).get("room"),g=Object(n.useRef)();Object(n.useEffect)((function(){return g.current=b.a.connect("/"),g.current.emit("joinRoom",{username:p,room:v}),g.current.on("message",(function(e){a(e)})),g.current.on("roomUsers",(function(e){var t=e.room,n=e.users;s(n),x(t)})),function(){g.current.disconnect()}}),[]);return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("header",{className:"chat-header",children:[Object(d.jsxs)("h1",{children:[Object(d.jsx)("i",{className:"fas fa-smile"})," SportChat"]}),Object(d.jsx)(j.b,{to:"/",id:"leave-btn",className:"btn",children:"Leave Room"})]}),Object(d.jsxs)("main",{className:"chat-main",children:[Object(d.jsxs)("div",{className:"chat-sidebar",children:[Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fas fa-comments"})," Room Name:"]}),Object(d.jsx)("h2",{id:"room-name",children:f}),Object(d.jsxs)("h3",{children:[Object(d.jsx)("i",{className:"fas fa-users"})," Users"]}),Object(d.jsx)("ul",{id:"users",children:t&&t.map((function(e){return Object(d.jsx)("li",{children:e.username},e.id)}))})]}),Object(d.jsx)("div",{className:"chat-messages",children:c&&c.map((function(e,t){return Object(d.jsx)(O,{el:e},t)}))})]}),Object(d.jsx)("div",{className:"chat-form-container",children:Object(d.jsxs)("form",{id:"chat-form",onSubmit:function(e){e.preventDefault(),g.current.emit("chatMessage",u),l("")},children:[Object(d.jsx)("input",{onChange:function(e){return l(e.target.value.trim())},value:u,id:"msg",type:"text",placeholder:"Enter Message",required:!0}),Object(d.jsxs)("button",{className:"btn",children:[Object(d.jsx)("i",{className:"fas fa-paper-plane"})," Send"]})]})})]})},x=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)("Funs of Zenit"),r=Object(o.a)(a,2),i=r[0],j=r[1];return Object(d.jsxs)("div",{className:"join-container",children:[Object(d.jsx)("header",{className:"join-header",children:Object(d.jsxs)("h1",{children:[Object(d.jsx)("i",{className:"fas fa-smile"}),"SportChat"]})}),Object(d.jsx)("main",{className:"join-main",children:Object(d.jsxs)("form",{onSubmit:function(e){e.preventDefault(),window.location="/chat?username=".concat(s,"&room=").concat(i),c(""),j("Funs of Zenit")},children:[Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{htmlFor:"username",children:"Username"}),Object(d.jsx)("input",{onChange:function(e){return c(e.target.value)},value:s,type:"text",name:"username",id:"username",placeholder:"Enter username...",required:!0})]}),Object(d.jsxs)("div",{className:"form-control",children:[Object(d.jsx)("label",{htmlFor:"room",children:"Room"}),Object(d.jsxs)("select",{name:"room",id:"room",onChange:function(e){return j(e.target.value)},value:i,children:[Object(d.jsx)("option",{value:"Funs of Zenit",children:"Funs of Zenit"}),Object(d.jsx)("option",{value:"Funs of Spartak",children:"Funs of Spartak"}),Object(d.jsx)("option",{value:"Funs of CSKA",children:"Funs of CSKA"}),Object(d.jsx)("option",{value:"Funs of Sochi",children:"Funs of Sochi"})]})]}),Object(d.jsx)("button",{type:"submit",className:"btn",children:"Join Chat"})]})})]})},p=function(){var e=Object(u.g)(),t=Object(u.f)();return setTimeout((function(){t.push("/")}),3e3),Object(d.jsx)("div",{className:"no-match",children:Object(d.jsxs)("p",{children:["Sorry, the page you are looking for at the ",Object(d.jsx)("span",{children:e.pathname}),", does not exist"]})})},v=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)([]),r=Object(o.a)(a,2),l=r[0],h=r[1];return Object(d.jsx)(j.a,{children:Object(d.jsx)("div",{className:"chat-container",children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/",children:Object(d.jsx)(x,{})}),Object(d.jsx)(u.a,{path:"/chat",children:Object(d.jsx)(f,{users:s,updateUsers:function(e){c(e)},messages:l,updateMessages:function(e){h((function(t){return[].concat(Object(i.a)(t),[e])}))}})}),Object(d.jsx)(u.a,{path:"*",children:Object(d.jsx)(p,{})})]})})})},g=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,92)).then((function(t){var s=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;s(e),n(e),c(e),a(e),r(e)}))};r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(v,{})}),document.getElementById("root")),g()}},[[91,1,2]]]);
//# sourceMappingURL=main.098a407d.chunk.js.map